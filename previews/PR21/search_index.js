var documenterSearchIndex = {"docs":
[{"location":"documentation/reference/#documentation-references","page":"Chemo-Mechanical Problem - References","title":"Chemo-Mechanical Problem - References","text":"","category":"section"},{"location":"documentation/reference/","page":"Chemo-Mechanical Problem - References","title":"Chemo-Mechanical Problem - References","text":"E. Bohn, T. Eckl, M. Kamlah and R. McMeeking. A Model for Lithium Diffusion and Stress Generation in an Intercalation Storage Particle with Phase Change - IOPscience. Journal of The Electrochemical Society 160 (2013). Accessed on 14.02.2025.\n\n\n\nD. R. Rollin. Modeling and Simulation of the Chemo-Mechanical Response in a Lithium-Ion Battery Electrode. Master thesis, Institute for applied mechanics (TU Braunschweig, 2021).\n\n\n\nD. R. Rollin, F. Larsson, K. Runesson and R. Jänicke. Upscaling of chemo-mechanical properties of battery electrode material. International Journal of Solids and Structures 281, 112405 (2023).\n\n\n\nX. Zhang, W. Shyy and A. Marie Sastry. Numerical Simulation of Intercalation-Induced Stress in Li-Ion Battery Electrode Particles. Journal of The Electrochemical Society 154, A910 (2007).\n\n\n\n","category":"page"},{"location":"reference/sub_scale/","page":"Sub Scale","title":"Sub Scale","text":"CurrentModule = YiyuanStudentProject","category":"page"},{"location":"reference/sub_scale/#Sub-Scale","page":"Sub Scale","title":"Sub Scale","text":"","category":"section"},{"location":"reference/sub_scale/","page":"Sub Scale","title":"Sub Scale","text":"generate_rve_grid\nprepare_setup\nadd_bc!\nassemble_K_M_f!\nassemble_element!\ncompute_time_step!\nsolve_time_series\nplot_grid\nanimate_result","category":"page"},{"location":"reference/sub_scale/#YiyuanStudentProject.generate_rve_grid","page":"Sub Scale","title":"YiyuanStudentProject.generate_rve_grid","text":"generate_rve_grid(; ϕ::Real, d::Real, meshsize::Real, dx::NTuple{3,Real}=(1.0,1.0,1.0))\ngenerate_rve_grid(spheres::Vector{BubbleBath.Sphere{3}}; meshsize::Real, dx::NTuple{3,Real}=(1.0,1.0,1.0))\n\nReturn a Grid with spherical inclusions for a 3D RVE with defined meshsize.  Two cell sets are included in the generated grid:\n\n\"particles\":    Cells within the spherical inclusions.\n\"matrix\":       Cells outside the spheres (background material).\n\nVariation 1\n\nThe grid will be generated by giving the volume fraction of the spherical inclusions ϕ (0 ≤ ϕ ≤ 1), the average diameter of the spheres d, and the meshsize as well as the RVE size dx  in 3D, which by default is (1.0, 1.0, 1.0). The RVE center will be at the coordinate system origin 0.0, 0.0, 0.0.\n\nVariation 2\n\nIn this variation a vector of pre-defined spheres to be embedded in the grid sphere is given instead of  the volume fraction and the average diameter of the sphere. The meshsize and the RVE size dx  are still needed arguments in this case.\n\n\n\n\n\n","category":"function"},{"location":"reference/sub_scale/#YiyuanStudentProject.prepare_setup","page":"Sub Scale","title":"YiyuanStudentProject.prepare_setup","text":"prepare_setup(rve::RVE{dim}) where {dim}\n\nReturn a RVESetup object for the element-wise assembly and time stepping. \n\nWith the object RVE as argument, the RVESetup is created by constructing PhaseSetup objects for material phase particles P and matrix M, initializing  necessary global matrices and vectors, and the total volume of RVE.\n\nThree unknown fields deformation u, chemical potential μ and ion concentration c are prescribed for all cells over both material phases.\n\n\n\n\n\n","category":"function"},{"location":"reference/sub_scale/#YiyuanStudentProject.add_bc!","page":"Sub Scale","title":"YiyuanStudentProject.add_bc!","text":"add_bc!(ch::ConstraintHandler, grid::Grid{3}, load::LoadCase{3})\n\nAdd a Dirichlet boundary condition for the unknown fields respectively on the ∂Ω part of the boundary. ∂Ω is defined by the collection of facets from the grid.  Boundary condition values are given by objectLoadCase. \n\n\n\n\n\n","category":"function"},{"location":"reference/sub_scale/#YiyuanStudentProject.assemble_K_M_f!","page":"Sub Scale","title":"YiyuanStudentProject.assemble_K_M_f!","text":"assemble_K_M_f!(setup::RVESetup)\n\nReturn the assembled stiffness matrix K, mass matrix M and right hand side vector f.\n\nThe assembly of all cells across all material phases is performed using the given input RVESetup.\n\n\n\n\n\n","category":"function"},{"location":"reference/sub_scale/#YiyuanStudentProject.assemble_element!","page":"Sub Scale","title":"YiyuanStudentProject.assemble_element!","text":"assemble_element!(setup::PhaseSetup)\n\nReturn the assembled local stiffness and mass matrices (Kₑ, Mₑ), the local right hand side vector (fₑ).  \n\nDifferent contributions of Kₑ, Mₑ and fₑ are computed with stored material parameters and necessary assembly setups provided by the input PhaseSetup.\n\n\n\n\n\n","category":"function"},{"location":"reference/sub_scale/#YiyuanStudentProject.compute_time_step!","page":"Sub Scale","title":"YiyuanStudentProject.compute_time_step!","text":"compute_time_step!(setup::RVESetup{dim}, load::LoadCase{dim}, Δt)\n\nReturn the object RVESetup with updated next time step solution vector aⁿ⁺¹.\n\nUsing Crank-Nicolson Method to compute the solution aⁿ⁺¹  in an implicit time stepping scheme for solving  the linear system in the next time step.\n\nNew boundary condition values LoadCase are applied before for the next time step solutions.\n\n\n\n\n\n","category":"function"},{"location":"reference/sub_scale/#YiyuanStudentProject.solve_time_series","page":"Sub Scale","title":"YiyuanStudentProject.solve_time_series","text":"solve_time_series(rve::RVE{dim}, load::LoadCase{dim};  Δt=0.1, t_total=1) where {dim}\n\nReturn results throughout the time stepping process for visualizing the fine scale problem results.  \n\nThe RVE problem is prepared, assembled and solved over a time series using the given RVE, LoadCase, t_total, Δt . By default t_total is set to 1 and Δt to 0.1.\n\nResults are stored in a NamedTuple with fields total time t  and solution vector a.\n\n\n\n\n\n","category":"function"},{"location":"reference/sub_scale/#YiyuanStudentProject.plot_grid","page":"Sub Scale","title":"YiyuanStudentProject.plot_grid","text":"plot_grid(grid::Grid{3})\n\nRuturn a Makie.Figure to visualize a given 3D finite element grid using the Makie plotting library.\n\n\n\n\n\n","category":"function"},{"location":"reference/sub_scale/#YiyuanStudentProject.animate_result","page":"Sub Scale","title":"YiyuanStudentProject.animate_result","text":"animate_result(res::NamedTuple, setup::RVESetup{dim}, file_name::String=\"Myresult.mp4\", kwargs...)\n\nReturn an mp4 file with name file_name, which by default is \"Myresult.mp4\". \n\nThis shows the evolution of the solution res for a 3D RVE simulation based on input RVESetup. \n\nFurther arguments like scale for visibel deformation can be used.\n\n\n\n\n\n","category":"function"},{"location":"reference/upscaling/","page":"Upscaling","title":"Upscaling","text":"CurrentModule = YiyuanStudentProject","category":"page"},{"location":"reference/upscaling/#Upscaling","page":"Upscaling","title":"Upscaling","text":"","category":"section"},{"location":"reference/upscaling/","page":"Upscaling","title":"Upscaling","text":"compute_effective_response!\naverage_quantities","category":"page"},{"location":"reference/upscaling/#YiyuanStudentProject.compute_effective_response!","page":"Upscaling","title":"YiyuanStudentProject.compute_effective_response!","text":"compute_effective_response!(gpdata::GaussPointData{dim}, rvesetup::RVESetup{dim}, load::LoadCase{dim}, Δt) where {dim}\n\nComputes the varialtionally consistent macro scale fields from an RVE at a macro scale Gauss Point. \n\nAn RVE probelm is solved with given RVESetup and LoadCase for the new time step with time width Δt. State variables aᵣᵥₑⁿ, c̄ⁿ, c̄₂ⁿ from GaussPointData are updated.\n\n\n\n\n\n","category":"function"},{"location":"reference/upscaling/#YiyuanStudentProject.average_quantities","page":"Upscaling","title":"YiyuanStudentProject.average_quantities","text":"average_quantities(a::Vector{Float64}, setup::RVESetup{dim}) where {dim}\n\nComputes the average quantities σ̄, c̄, c̄₂, j̄ for a given solution vector a over the phase setups of an RVE. \n\nThen the macro scale consistent macro scale fields are computed as following:\n\nσ̄  = ∫ (E ⊡ (ε - αᶜʰ * (c - cʳᵉᶠ))) * dΩ / Vᵣᵥₑ\n\nc̄ = ∫ c * dΩ / Vᵣᵥₑ\n\nc̄₂ = ∫ (c * x) * dΩ / Vᵣᵥₑ\n\nj̄ = - ∫ (M ⋅ ∇μ) * dΩ / Vᵣᵥₑ\n\n\n\n\n\n","category":"function"},{"location":"reference/macro_scale/","page":"Macro Scale","title":"Macro Scale","text":"CurrentModule = YiyuanStudentProject","category":"page"},{"location":"reference/macro_scale/#Macro-Scale","page":"Macro Scale","title":"Macro Scale","text":"","category":"section"},{"location":"reference/macro_scale/","page":"Macro Scale","title":"Macro Scale","text":"prepare_macro_setup\nadd_macro_bc!\nassemble_macro_K!\nassemble_macro_element!\nsolve_macro_problem\nanimate_macro_result\n_prepare_plots!\nanimate_combined_result","category":"page"},{"location":"reference/macro_scale/#YiyuanStudentProject.prepare_macro_setup","page":"Macro Scale","title":"YiyuanStudentProject.prepare_macro_setup","text":"prepare_macro_setup(grid::Grid{dim,C}, rvesetup::RVESetup{dim}, rve::RVE{dim}, Δt, bc::MacroBCParams) where {dim,C}\n\nReturn a SolveSetup object for the element-wise assembly and solving the time dependent macro scale problem. \n\nA initialized buffer data is created with the object GaussPointData at each integration point. \n\nThe object PhaseSetup is created based on the given macro scale grid grid, the boundary condition MacroBCParams with the buffer data.\n\nWith necessary parameters, initialized global matrix and vectors, and PhaseSetup the SolveSetup is computed.\n\nTwo unknown fields deformation u, chemical potential μ are prescribed for all cells.\n\n\n\n\n\n","category":"function"},{"location":"reference/macro_scale/#YiyuanStudentProject.add_macro_bc!","page":"Macro Scale","title":"YiyuanStudentProject.add_macro_bc!","text":"add_macro_bc!(ch::ConstraintHandler, grid::Grid{3}, Δt, bc::MacroBCParams)\n\nAdd a time dependent dirichlet boundary condition for the macro scale unknown fields respectively on the possible facet ∂Ω1 and ∂Ω2.\n\nApply time dependent boundary condition on both unknown fields u and μ.\n\n\n\n\n\n","category":"function"},{"location":"reference/macro_scale/#YiyuanStudentProject.assemble_macro_K!","page":"Macro Scale","title":"YiyuanStudentProject.assemble_macro_K!","text":"    assemble_macro_K!(setup::SolveSetup{dim}, Δt) where {dim}\n\nReturn the whole SolveSetup with assembled stiffness matrix K.\n\nThe assembly of all cells is performed using the given input RVESetup.\n\n\n\n\n\n","category":"function"},{"location":"reference/macro_scale/#YiyuanStudentProject.assemble_macro_element!","page":"Macro Scale","title":"YiyuanStudentProject.assemble_macro_element!","text":"    assemble_macro_element!(setup::AssemblySetup{dim}, Δt, gpdata::Vector{GaussPointData{dim}}) where {dim}\n\nReturn the assembled stiffness matrix Kₑ.\n\nNew variationally consistent macro scale fileds σ̄, ċ, ċ₂, and j̄ are computed using the corresponding GaussPointData{dim} and LoadCase, which consists of the quadrature point values ε̄, μ̄, ζ̄.\n\nDifferent contributions of Kₑ are computed with these updated macro scale fileds and necessary assembly setups provided by the input AssemblySetup.\n\n\n\n\n\n","category":"function"},{"location":"reference/macro_scale/#YiyuanStudentProject.solve_macro_problem","page":"Macro Scale","title":"YiyuanStudentProject.solve_macro_problem","text":"solve_macro_problem(grid::Grid{dim}, rvesetup::RVESetup{dim}, rve::RVE{dim}, bc::MacroBCParams; Δt=0.1, t_total=1) where {dim}\n\nReturn results throughout the time stepping process for visualizing the fine scale problem results.  \n\nThe macro scale problem is prepared, assembled and solved over a time series using the given grid, RVESetup, RVE, MacroBCParams, t_total, Δt . By default t_total is set to 1 and Δt to 0.1.\n\nResults on both macro scale and the reference RVE are stored in a NamedTuple with fields total time t  and solution vector a respectively.\n\nThe time dependent boundary condition is updated to the global stiffness matrix and force vector as well as the solution vector.\n\nUsing solver from Pardisojl for eventually ill conditioned system matrices.\n\n\n\n\n\n","category":"function"},{"location":"reference/macro_scale/#YiyuanStudentProject.animate_macro_result","page":"Macro Scale","title":"YiyuanStudentProject.animate_macro_result","text":"animate_macro_result(res::NamedTuple, setup::SolveSetup{dim}; file_name =\"Myresult.mp4\", kwargs...) where {dim}\n\nReturn an mp4 file with name file_name, which by default is \"Myresult.mp4\". \n\nThis shows the evolution of the solution res for a macro scale simulation of a multi scale problem based on input SolveSetup. \n\nFurther arguments like scale for visibel deformation can be used.\n\n\n\n\n\n","category":"function"},{"location":"reference/macro_scale/#YiyuanStudentProject._prepare_plots!","page":"Macro Scale","title":"YiyuanStudentProject._prepare_plots!","text":"_prepare_plots!(pos, res::NamedTuple, setup::RVESetup{dim}; scale::Real=1.0, titlestart::String=\"RVE response\") where {dim}\n\nSets up the necessary plots with a specified layout position pos and observables tᵒᵇˢ and aᵒᵇˢ to visualize the simulation results res of a RVE problem RVESetup: deformation u, chemical potential μ, concentration c. \n\nOptional arguments include a scaling factor scale for visualizing the deformation and a title titlestart. By default the scale is set to 1.0 and titlestart to RVE response.\n\n\n\n\n\n_prepare_plots!(pos, res::NamedTuple, setup::SolveSetup{dim}; scale::Real=1.0, titlestart::String=\"macroscale solution\") where {dim}\n\nSets up the necessary plots with a specified layout position pos and observables tᵒᵇˢ and aᵒᵇˢ to visualize the simulation results res of a multi scale problem SolveSetup: deformation u, chemical potential μ.\n\nOptional arguments include a scaling factor scale for visualizing the deformation and a title titlestart. By default the scale is set to 1.0 and titlestart to macroscale solution.\n\n\n\n\n\n","category":"function"},{"location":"reference/macro_scale/#YiyuanStudentProject.animate_combined_result","page":"Macro Scale","title":"YiyuanStudentProject.animate_combined_result","text":"animate_combined_result(res::NamedTuple, resᵣᵥₑ::NamedTuple, setup::SolveSetup{dim}; file_name =\"Myresult.mp4\", scale=1.0) where {dim}\n\nReturn an mp4 file with name file_name, which by default is \"Myresult.mp4\". \n\nThis shows the evolution of the macro scale solution res and the RVE solution at a corresponding quadrature point cell[1]qp[1] for a multi scale simulation based on input SolveSetup.\n\nFurther arguments like scale for visibel deformation can be used, which by default is set to 1.0.\n\n\n\n\n\n","category":"function"},{"location":"documentation/multi_scale/#documentation-multi-scale","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"","category":"section"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"A full-scale resolution of the material microstructure provides highly accurate results but is computationally expensive. To improve efficiency while preserving accuracy, a multi-scale approach is used. This method decomposes the original fine-scale problem into a homogeneous macro-scale model and a sub-scale RVE that fully captures the microstructure.","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"(Image: alt text)","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"Fig. 1: schematic diagram of decomposition of a fine scale problem using multi-scale method. ","category":"page"},{"location":"documentation/multi_scale/#Variationally-Consistent-Homogenization-(VCH)","page":"Chemo-Mechanical Problem - Multi Scale","title":"Variationally Consistent Homogenization (VCH)","text":"","category":"section"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"By replacing integrands by running averaging on the RVE, the homogenization is introduced. The unknown fields are decomposed using the assumption of a hierachical decomposition. ","category":"page"},{"location":"documentation/multi_scale/#Running-Averaging-on-RVE","page":"Chemo-Mechanical Problem - Multi Scale","title":"Running Averaging on RVE","text":"","category":"section"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"The running averaging operator for a quantity diamond  is denoted for volume and surface as following:","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"beginalign\nlangle diamond rangle _square = frac1 Omega _square int_ Omega _square diamond  d  Omega\n\n\nlangle langle diamond rangle rangle _square = frac1boldsymbol Gamma _square int_boldsymbol Gamma _square diamond  d boldsymbol Gamma\nendalign","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"where the corresponding homogenized macro scale field bar diamond is often defined as bar diamond = langle diamond rangle _square . ","category":"page"},{"location":"documentation/multi_scale/#Hierarchical-Decomposition","page":"Chemo-Mechanical Problem - Multi Scale","title":"Hierarchical Decomposition","text":"","category":"section"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"For the chemo-mechanical problem, displacement boldsymbol u and chemical potential $ \\mu$ can be decomposed into (smooth) macro-scale diamond ^M and (fluctuating) sub-scale diamond ^s parts, where the macro-scale parts will be prescribed using Taylor expansions on each RVE. Since the concentration $ c$ is only a local quantity, no such decomposition is needed for it.","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"Thus, using first order Taylor expension (linear variation) the homogenized fields barboldsymbol u and bar mu are prolonged over the RVE as follows:","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"beginalign\nboldsymbol u^textMbarboldsymbol u(barboldsymbol x boldsymbol x ) = barboldsymbol u(barboldsymbol x) + barboldsymbol xi(barboldsymbol x) cdot x - barboldsymbol x   barboldsymbol xi = barboldsymbol u  otimes boldsymbol nabla   boldsymbol x in  Omega_square\n\n\n\nboldsymbol mu^textMbarboldsymbol mu(barboldsymbol x boldsymbol x ) = barboldsymbol mu(barboldsymbol x) + barboldsymbol zeta(barboldsymbol x) cdot x - barboldsymbol x   barboldsymbol zeta = boldsymbol nabla barboldsymbol mu     x in Omega_square\nendalign","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"where barboldsymbol x is centriod and also holds to the upscaling rules mentioned earlier.","category":"page"},{"location":"documentation/multi_scale/#Upscaling","page":"Chemo-Mechanical Problem - Multi Scale","title":"Upscaling","text":"","category":"section"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"After inserting the hierarchical decomposition boldsymbol u = boldsymbol u ^textM + boldsymbol u ^texts in mathbb U ^textM oplus mathbb U ^texts and boldsymbol mu = boldsymbol mu ^textM + boldsymbol mu ^texts in mathbb M ^textM oplus mathbb M ^texts and the upsacling assumption bar diamond = langle diamond rangle _square into the fine scale week form, the two scale problem is defined:","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"beginalign\nint_Omega langle boldsymbol sigma (boldsymbol varepsilonboldsymbol u ^Mbar boldsymbol u + boldsymbol u ^textsboldsymbol c ^texts)  boldsymbol varepsilonboldsymbol u ^M delta bar boldsymbol u + deltaboldsymbol u ^texts rangle _square  dOmega  =  int_boldsymbol Gamma_N^text(u) boldsymbol t^textp cdot delta barboldsymbol u  dboldsymbol Gamma\n\nforall delta (barboldsymbol u boldsymbol u ^texts) in bar mathbbU^text0 oplus mathbb U ^texts\n\nint_Omega langle dotboldsymbol c ^texts  mu ^textM delta barboldsymbol mu + deltamu^texts rangle _square  dOmega - int_Omega boldsymbol langle j(boldsymbol nablamu ^textM barboldsymbol mu + mu^texts) cdot boldsymbol nablamu ^textM delta barboldsymbol mu + deltamu^texts rangle _square  dOmega\n=  int_boldsymbol Gamma_N^mu boldsymbol h^textp delta barboldsymbol mu  dboldsymbol Gamma\n\nforall delta (barboldsymbol mu boldsymbol mu ^texts) in bar mathbbM^text0 oplus mathbb M ^texts\n\nint_Omega langle (mu ^textM barboldsymbol mu + mu^texts - boldsymbol mu^texten(boldsymbol varepsilonboldsymbol u ^textMbar boldsymbol u + boldsymbol u ^texts boldsymbol c^texts)) delta boldsymbol c^texts rangle _square  dOmega\n= 0\n\nforall delta boldsymbol c^texts in mathbbC^text0\nendalign","category":"page"},{"location":"documentation/multi_scale/#Weak-Format-Macro-Scale","page":"Chemo-Mechanical Problem - Multi Scale","title":"Weak Format Macro Scale","text":"","category":"section"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"By with setting delta boldsymbol u^texts delta boldsymbol mu^texts delta boldsymbol mu^texts to 0, the globally coupled macro scale problem is established.","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"beginalign\nint_Omega barboldsymbol sigma  boldsymbol varepsilondelta barboldsymbol u  dOmega  =  int_boldsymbol Gamma_N^(u) boldsymbol t^textp cdot delta barboldsymbol u  dboldsymbol Gamma\n\nforall delta barboldsymbol u in barmathbbU^0\n\nint_Omega dotbar c  delta bar mu  dOmega - int_Omega (barboldsymbol j - dotbar  c_text2) cdot boldsymbol nabladelta bar mu  dOmega\n=  int_boldsymbol Gamma_N^(mu) boldsymbol h^textp delta bar mu  dboldsymbol Gamma\n\nforall delta bar mu in barmathbbM^0\nendalign","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"with the variationally consistent macro scale homogenized fields:","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"beginalign\n    barboldsymbol sigma = langle boldsymbol sigma rangle _square = langle boldsymbol E colon boldsymbol varepsilonboldsymbol u-boldsymbol alpha^textch c - c_ref rangle _square\n\n    barboldsymbol j = langle boldsymbol j rangle _square = -langle boldsymbol M cdot boldsymbol zetaboldsymbol mu rangle _square\n\n    bar c = langle  c rangle _square\n\n    bar boldsymbol c_2 = langle  c boldsymbol x - barboldsymbol x rangle _square\nendalign","category":"page"},{"location":"documentation/multi_scale/#Boundary-Condition-RVE","page":"Chemo-Mechanical Problem - Multi Scale","title":"Boundary Condition RVE","text":"","category":"section"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"When fully adapting the microstructural details from the fine-scale problem at each macro-scale quadrature point, a consistent boundary condition must be established to align the two scales: ","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"beginalign\n    boldsymbol u = barboldsymbol u + barboldsymbol varepsilon boldsymbol x - barboldsymbol x\n    \n    texton   boldsymbol Gamma_D^(u)\n\n     mu = barmu + barboldsymbol zeta boldsymbol x - barboldsymbol x\n     \n    texton   boldsymbol Gamma_D^(mu)\n\nendalign","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"Due to rigid body translation there is no resulting sub scale stress from macro scale deformation barboldsymbol u. Therefore, for convenience barboldsymbol u can be negligible.","category":"page"},{"location":"documentation/multi_scale/#Time-Stepping","page":"Chemo-Mechanical Problem - Multi Scale","title":"Time Stepping","text":"","category":"section"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"For every time step, the RVE problem is going to be solved at the corresponding quadrature point. The four variationally consistent macro scale fields are updated using new RVE results at current time. New stiffness matrix boldsymbol K^textn is then computed with the new variationally consistent macro scale fields. A time dependent boundary condition is applied on both boldsymbol K^textn and boldsymbol f^textn.","category":"page"},{"location":"documentation/multi_scale/","page":"Chemo-Mechanical Problem - Multi Scale","title":"Chemo-Mechanical Problem - Multi Scale","text":"beginalign\n\nboldsymbol K^textn(barboldsymbol sigma^textn \n    barboldsymbol j^textn dotbar c^textn dotbarboldsymbol c_text2^n) boldsymbol a^textn = boldsymbol f^textn\n\nboldsymbol a^textn = (boldsymbol K^textn)^text-1 boldsymbol f^textn\n\nendalign","category":"page"},{"location":"documentation/#Documentation","page":"Documentation overview","title":"Documentation","text":"","category":"section"},{"location":"documentation/","page":"Documentation overview","title":"Documentation overview","text":"Pages = [\n    \"fine_scale.md\",\n    \"multi_scale.md\",\n    \"challenge_problem.md\",\n    \"reference.md\",]","category":"page"},{"location":"documentation/fine_scale/#documentation-fine-scale","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"","category":"section"},{"location":"documentation/fine_scale/#Strong-From","page":"Chemo-Mechanical Problem - Fine Scale","title":"Strong From","text":"","category":"section"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"Three primary variable fields: displacement vector boldsymbol u(boldsymbol xt) Omega times mathbbR^+ rightarrow mathbbR^3 ,molar ion concentration c(boldsymbol xt) Omega times mathbbR^+ rightarrow mathbbR as well as the chemical potential gradient $ \\mu(\\boldsymbol x,t): \\Omega \\times \\mathbb{R}^{+} \\rightarrow \\mathbb{R}$ are solved in the lithium structural battery problem. To define the problem the balance of linear momentum and the balance of mass are given in Strong Forms as following:","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"beginalign\n-boldsymbolsigma cdot boldsymbolnabla = 0\n\ntextin  Omega times (0T\n\ndot c + boldsymbol j cdot boldsymbolnabla = 0\n\ntextin  Omega times (0T\nendalign","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"Where the boundary is divied into three parts for the three variable fields respectively \\Gamma = \\GammaD^{(u)} \\cup \\GammaN^{(u)} = \\GammaD^{(\\mu)} \\cup \\GammaN^{(\\mu)} :","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"beginalign\nboldsymbol u = boldsymbol u^textp\n\ntexton  Gamma_D^(u) times (0T\n\nboldsymbol t = boldsymbol sigma cdot boldsymbol n = boldsymbol t^textp\n\ntexton  Gamma_N^(u) times (0T\n\n mu =  mu^textp\n\ntexton  Gamma_D^(mu) times (0T\n\nboldsymbol h = -boldsymbol j cdot boldsymbol n = boldsymbol h^textp\n\ntexton  Gamma_N^(mu) times (0T\nendalign","category":"page"},{"location":"documentation/fine_scale/#Constitutive-Models","page":"Chemo-Mechanical Problem - Fine Scale","title":"Constitutive Models","text":"","category":"section"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"Due to the coupling of the mechanical and chemical processes the total strain contains contributions due to a deformation state boldsymbol u(boldsymbol xt) and the ion concentration $ c(\\boldsymbol x,t) where an ion intercalation tensor boldsymbol alpha^ch =  alpha boldsymbol I is used based on the models of Zhang, Shyy and Sastry and Bohn et al.","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"beginalign\nboldsymbol varepsilonboldsymbol u = (boldsymbol u otimes boldsymbol nabla)^textsym\n\nboldsymbol varepsilon^textch(c) = boldsymbol alpha^textch ( c- c_textref)\nendalign","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"The free energy psi is assumed to be the sum of mechanical and chemical parts boldsymbol psi (boldsymbol varepsilon c) = boldsymbol psi^textmech(boldsymbol varepsilon c) + boldsymbol psi^textchem( c).","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"beginalign\nboldsymbol psi^textmech = frac12(boldsymbol varepsilon-boldsymbol varepsilon^textch( c)) colon boldsymbol E colon (boldsymbol varepsilon-boldsymbol varepsilon^textch( c))\n\nboldsymbol psi^textchem = ( c- c_textref) mu_textref + frac12 frac R  theta_textref c_text m( c- c_textref)^2\nendalign","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"Furthermore, a constant mobility tensor boldsymbol M for the assumption of a linear relation between ion flux and the gradient of the chemical potential is defined. For isotropic cases as in this project a mobility coefficient boldsymbol eta is used. A reference temperature $ \\theta\\text{ref}$ and the concentration $ c\\text{ref}$ as well as the reference chemical potential $ \\mu\\text{ref}$ are gloable constant material parameters for the purpose of linearization. $ c\\text{m}$ is an auxiliary parameter. So that the simplified constitutive equations are:","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"beginalign\n    boldsymbol sigma(boldsymbol varepsilon c) = fracpartial boldsymbolpsipartial boldsymbolvarepsilon = boldsymbol E  colon (boldsymbol varepsilon-boldsymbol varepsilon^textch(boldsymbol c))\n\n    mu(boldsymbol varepsilon c) =  mu^texten(boldsymbol varepsilon c) = fracpartial boldsymbol psipartial boldsymbol varepsilon =  mu_textref + frac R  theta_textref c_textm( c- c_textref) - boldsymbol alpha^textch colon boldsymbol sigma(boldsymbol varepsilon c)\n\n    boldsymbol j(boldsymbol nabla mu) = -boldsymbol M cdot boldsymbol nabla mu\nendalign","category":"page"},{"location":"documentation/fine_scale/#Weak-Format","page":"Chemo-Mechanical Problem - Fine Scale","title":"Weak Format","text":"","category":"section"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"beginalign\nint_Omega boldsymbol sigma (boldsymbol varepsilonboldsymbol u c)  boldsymbol varepsilondelta boldsymbol u  dOmega  =  int_Gamma_N^(u) boldsymbol t^textp cdot delta boldsymbol u  dGamma\n\nforall delta boldsymbol u in mathbbU^0\n\nint_Omega dot c  delta  mu  dOmega - int_Omega boldsymbol j(boldsymbol nabla mu) cdot boldsymbol nabladelta  mu  dOmega\n=  int_Gamma_N^(mu) boldsymbol h^textp delta  mu  dGamma\n\nforall delta  mu in mathbbM^0\n\nint_Omega ( mu -  mu^texten(boldsymbol varepsilonu  c)) delta  c  dOmega\n= 0\n\nforall delta  c in mathbbC^0\nendalign","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"where the initial state diamond_0 of all unknown fields for all elements in Omega can be choosen based on the consistent reference state as mentioned earlier $ c0 =  c\\text{ref},  \\mu0 = \\mu\\text{ref},  u_0 = 0$.","category":"page"},{"location":"documentation/fine_scale/#Time-Stepping","page":"Chemo-Mechanical Problem - Fine Scale","title":"Time Stepping","text":"","category":"section"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"As the transient problem is discussed here, one of the crucial part is to introduce a time integation int_Omega dot c  delta  mu  dOmega in the FE context. Due to the linearity of the problem, a direct derivation of the element stiffness boldsymbol K_texte, the mass matrix boldsymbol M_texte, and the right hand side vector  boldsymbol f_texte is possible. The constraint matrix boldsymbol C_texte for langle boldsymbol murangle _square = bar mu is merged into the last row and column of boldsymbol K_texte. ","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"The whole PDE system can be discretized using the Crank-Nicolson scheme, where boldsymbol a is the global solution vector including all degrees of freedom:","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"beginalign\nboldsymbol a(t^textn+1) approx boldsymbol a(t^textn) + frac12 Delta t (dot boldsymbol a (t^n) + dot boldsymbol a(t^n+1))\nendalign","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"so that the linear system can be discretized as following:","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"beginalign\nboldsymbol M dotboldsymbol a^textn + boldsymbol K boldsymbol a^textn = boldsymbol f^textn\n\ndotboldsymbol a^textn = boldsymbol M^-1boldsymbol f^textn - boldsymbol K boldsymbol a^textn\n\nboldsymbol a^text n+1 = boldsymbol a^text n + frac12 Delta t (dot boldsymbol a ^text n + dot boldsymbol a^text n+1)\n\nboldsymbol a^text n+1 = boldsymbol a^text n + frac12 Delta t (boldsymbol M^-1((boldsymbol f^textn + boldsymbol f^textn+1)  - boldsymbol K (boldsymbol a^textn + boldsymbol a^textn+1)) )\n\nboldsymbol M boldsymbol a^text n+1 + frac12 Delta t boldsymbol K boldsymbol a^textn+1 = boldsymbol M boldsymbol a^text n + frac12 Delta t (-boldsymbol K boldsymbol a^textn + (boldsymbol f^textn + boldsymbol f^textn+1))\nendalign","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"In order to solve for boldsymbol a^textn+1 the Jacobian matrix boldsymbol J and the residual vector boldsymbol g are computed using the global stiffness matrix boldsymbol K and mass matrix boldsymbol M as well as boldsymbol a^textn for boldsymbol g.","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"beginalign\nboldsymbol J = boldsymbol M + frac12Delta t boldsymbol K\n\nboldsymbol g = (boldsymbol M -frac12Delta t boldsymbol K )boldsymbol a^textn + Delta t frac12(boldsymbol f^textn + boldsymbol f^textn+1)\n\nboldsymbol J boldsymbol a^text n+1 = boldsymbol g\nendalign","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"where the global right hand side vector boldsymbol f is time independent. It only consists of constant material parameters like c _textref R theta_textref c_m mu _textref boldsymbol E boldsymbol alpha^textch in each element right hand side vector boldsymbol f_texte","category":"page"},{"location":"documentation/fine_scale/","page":"Chemo-Mechanical Problem - Fine Scale","title":"Chemo-Mechanical Problem - Fine Scale","text":"beginalign\nf_textetextu = int_Omega - delta boldsymbol varepsilon  boldsymbol E  boldsymbol alpha^textch c _textref  dOmega  \n\nf_textetextc = int_Omega delta c (mu _textref - (frac R  theta_textref c_textm + boldsymbol alpha^textch  boldsymbol E  boldsymbol alpha^textch ))   c _textref  dOmega\nendalign","category":"page"},{"location":"reference/#Reference","page":"Reference overview","title":"Reference","text":"","category":"section"},{"location":"reference/","page":"Reference overview","title":"Reference overview","text":"Pages = [\n    \"types.md\",\n    \"sub_scale.md\",\n    \"upscaling.md\",\n    \"macro_scale.md\",\n]","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"EditURL = \"../literate-examples/example_1.jl\"","category":"page"},{"location":"examples/example_1/#example-1","page":"Example","title":"Example 1","text":"","category":"section"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"(Image: ) Figure 1 Schematic illustration of a FE² framwork with two material phases (Particles in blue and matrix in gray) in RVE and a possible boundary condition on macro scale object as well as required parameters for a transient chemo-mechanical problem","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"In this example, we will solve the transient linear chemo-mechanical problem in a FE² framework. The mathmatical model can be found in the documentation. A domain with particles (Omega^textP) embedded in matrix (Omega^textM) is prescribed. Parameters for solving the problem are defined for both sub scale (RVE) and macro scale. A macro scale boundary condition is as well selected to constrain the object.","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"A main function will be defined which sets up everything and solves the problem with a given time step size and total simulation time.","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"The full program, without comments, can be found in the next section.","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"using YiyuanStudentProject","category":"page"},{"location":"examples/example_1/#Preparation","page":"Example","title":"Preparation","text":"","category":"section"},{"location":"examples/example_1/#Sub-Scale-(RVE)","page":"Example","title":"Sub Scale (RVE)","text":"","category":"section"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"Setting up the dimension, material parameters. The material parameters are cataloged with P for particles and M for matrix and are characterized using simple values for now.","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"Generate a grid with spherical inclusions for a 3D Representative Volume Element (RVE) in desired meshsize and grid size dx = (1.0, 1.0, 1.0)","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"function sub_scale_pre()\n    dim = 3\n    P = Material{dim}(; G=4.5e5, K=8.0e5, η=0.5, cʳᵉᶠ=0.0, μʳᵉᶠ=0.0, θʳᵉᶠ=1.0, cᵐ=1.0, α=0.2)\n    M = Material{dim}(; G=0.8e5, K=1.7e5, η=1.0, cʳᵉᶠ=0.0, μʳᵉᶠ=0.0, θʳᵉᶠ=1.0, cᵐ=1.0, α=0.0)\n    d = 0.2\n    ϕ = 0.3\n    meshsize = 0.1\n    grid = generate_rve_grid(; ϕ=ϕ, d=d, meshsize=meshsize, dx=(1.0, 1.0, 1.0))\n    return grid, P, M\nend","category":"page"},{"location":"examples/example_1/#Macro-Scale","page":"Example","title":"Macro Scale","text":"","category":"section"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"Setting up the grid parameters and generate a macro scale grid.","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"function macro_scale_pre()\n    element_number = (1, 1, 1)\n    x̄_l = Vec{3, Float64}((-50, -50, -50))\n    x̄_r = Vec{3, Float64}((50, 50, 50))\n    grid_macro = generate_grid(Tetrahedron, element_number , x̄_l, x̄_r)\n    return grid_macro\nend","category":"page"},{"location":"examples/example_1/#Solve","page":"Example","title":"Solve","text":"","category":"section"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"Construct an object RVESetup named setup_rve with relevent infomation for solving the RVE problem.","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"Due to the linearity of the problem, gloable stiffness matrix K and gloable mass matrix M as well as gloable right hand side vector f remain the same through out the time stepping. Perform the assembly for constructing the system matrices K, M, and right hand side vector f.","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"Create an appropriate boundary condition using object MacroBCParams","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"Solve the time dependent problem macro scale problem. A corresponding RVE would be solved at each quadrature point in macro scale problem.","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"A visualization of results from both fine scale and macro scale problem can use animate_combined_result","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"function solve(grid_rve, P, M, grid_macro, Δt, t_total)\n    rve = RVE(grid_rve, P, M)\n    setup_rve = prepare_setup(rve)\n    assemble_K_M_f!(setup_rve)\n    bc = MacroBCParams(Vec{3}((0.01, 0.0, 0.0)), Vec{3}((0.0, 0.0, 0.0)), 1.0, 0.0, \"left\", \"right\")\n    res, res_rve, setup = solve_macro_problem(grid_macro, setup_rve, rve, bc, Δt=Δt, t_total=t_total)\nend","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"Construct the main function","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"function example()\n    grid_rve, P, M = sub_scale_pre()\n    grid_macro = macro_scale_pre()\n    Δt = 1e-6\n    t_total = 1e-5\n    solve(grid_rve, P, M, grid_macro, Δt, t_total)\nend","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"Run the simulation","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"example()","category":"page"},{"location":"examples/example_1/#example_1-plain-program","page":"Example","title":"Plain program","text":"","category":"section"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"Here follows a version of the program without any comments. The file is also available here: example_1.jl.","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"using YiyuanStudentProject\n\nfunction sub_scale_pre()\n    dim = 3\n    P = Material{dim}(; G=4.5e5, K=8.0e5, η=0.5, cʳᵉᶠ=0.0, μʳᵉᶠ=0.0, θʳᵉᶠ=1.0, cᵐ=1.0, α=0.2)\n    M = Material{dim}(; G=0.8e5, K=1.7e5, η=1.0, cʳᵉᶠ=0.0, μʳᵉᶠ=0.0, θʳᵉᶠ=1.0, cᵐ=1.0, α=0.0)\n    d = 0.2\n    ϕ = 0.3\n    meshsize = 0.1\n    grid = generate_rve_grid(; ϕ=ϕ, d=d, meshsize=meshsize, dx=(1.0, 1.0, 1.0))\n    return grid, P, M\nend\n\nfunction macro_scale_pre()\n    element_number = (1, 1, 1)\n    x̄_l = Vec{3, Float64}((-50, -50, -50))\n    x̄_r = Vec{3, Float64}((50, 50, 50))\n    grid_macro = generate_grid(Tetrahedron, element_number , x̄_l, x̄_r)\n    return grid_macro\nend\n\nfunction solve(grid_rve, P, M, grid_macro, Δt, t_total)\n    rve = RVE(grid_rve, P, M)\n    setup_rve = prepare_setup(rve)\n    assemble_K_M_f!(setup_rve)\n    bc = MacroBCParams(Vec{3}((0.01, 0.0, 0.0)), Vec{3}((0.0, 0.0, 0.0)), 1.0, 0.0, \"left\", \"right\")\n    res, res_rve, setup = solve_macro_problem(grid_macro, setup_rve, rve, bc, Δt=Δt, t_total=t_total)\nend\n\nfunction example()\n    grid_rve, P, M = sub_scale_pre()\n    grid_macro = macro_scale_pre()\n    Δt = 1e-6\n    t_total = 1e-5\n    solve(grid_rve, P, M, grid_macro, Δt, t_total)\nend\n\nexample()","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"","category":"page"},{"location":"examples/example_1/","page":"Example","title":"Example","text":"This page was generated using Literate.jl.","category":"page"},{"location":"documentation/challenge_problem/#documentation-challenge-probelm","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"","category":"section"},{"location":"documentation/challenge_problem/#Challenges","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Challenges","text":"","category":"section"},{"location":"documentation/challenge_problem/#Right-hand-side-vector-for-RVE","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Right hand side vector for RVE","text":"","category":"section"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"Not obivous but with introducting the reference values $ c\\text{ref}$ and $ \\mu\\text{ref}$ the following parts from the weak form only multiply the test shape function and can be moved to the right hand side:","category":"page"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"beginalign\nf_texteu = int_Omega - delta boldsymbol varepsilon  boldsymbol E  boldsymbol alpha^textch  c _textref  dOmega  \n\nf_textec = int_Omega delta c  (mu _textref - (frac R  theta_textref c_textm + alpha^textch  boldsymbol E  alpha^textch ))  c _textref  dOmega\nendalign","category":"page"},{"location":"documentation/challenge_problem/#Implicit-RVE-boundary-condition-update","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Implicit RVE boundary condition update","text":"","category":"section"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"The RVE Boundary condition can not be directly explictly defined on sub scale. It needs to be renewed at every time step from corresponding macro scale quadrature point.","category":"page"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"(Image: alt text)","category":"page"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"Fig. 1: Update for RVE boundary condition at each time step.","category":"page"},{"location":"documentation/challenge_problem/#Consistent-initial-guesses","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Consistent initial guesses","text":"","category":"section"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"To ensure consistency, the initial guess for chemical potential $ \\mu$ and ion concentration $ c$ on both macro scale and sub scale need to be equal to the given reference values $ c\\text{ref}$ and $ \\mu\\text{ref}$. Furthermore, the initial macro-scale boundary condition should correspond with the initial solution guess.","category":"page"},{"location":"documentation/challenge_problem/#Result-storage-throughout-the-time-stepping","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Result storage throughout the time stepping","text":"","category":"section"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"An object GaussPointData is used as buffer to ensure a direct calculation of barboldsymbol sigma, barboldsymbol j, dotbarboldsymbol c_text2, dotbarboldsymbol c.","category":"page"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"All the macro scale result vectors and sub scale result vector at one certain quadrature point throughout the time stepping are stored in a NamedTuple respectively. ","category":"page"},{"location":"documentation/challenge_problem/#Combined-animated-plotting","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Combined animated plotting","text":"","category":"section"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"Using observables from Makiejl an animation for the time depenedent results can be created. The location of the reference RVE is specified in the macro scale undeformed grid. Identical color bar for the chemical potential on both macro and sub scale is used to ensure an easier visual comparison.","category":"page"},{"location":"documentation/challenge_problem/#Remaining-Problems","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Remaining Problems","text":"","category":"section"},{"location":"documentation/challenge_problem/#Delayed-adapting-of-RVE-BC-from-macro-scale","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Delayed adapting of RVE BC from macro scale","text":"","category":"section"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"As it shown in the following figures, for the reference quadrature point cell[1]qp[1], a macro scale chemical potential of approximately 0.5 is reached at time  t = 1e-5. For the RVE boundary however, a lower chemical potential of 0.25 is displayed. This value matches the corresponding macro scale chemical potential at time t = 7e-6","category":"page"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"(Image: alt text) Fig. 2: Results for both macro scale and RVE at time step 1e-5.","category":"page"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"(Image: alt text) Fig. 3: Results for both macro scale and RVE at time step 7e-6.","category":"page"},{"location":"documentation/challenge_problem/#Possible-cause","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Possible cause","text":"","category":"section"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"Plotting issue: Since Makie.jl only plots the values on element nodes and due to the linearity of the problem, a linear gradient is generated without considering the actual quadrature point data.","category":"page"},{"location":"documentation/challenge_problem/#Problematic-results-with-increasing-elements-in-macro-scale-grid","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Problematic results with increasing elements in macro scale grid","text":"","category":"section"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"With a macro scale grid with more than one element in each direction, the results are unreasonable:","category":"page"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"(Image: )","category":"page"},{"location":"documentation/challenge_problem/#Limited-flexibility-on-RVE-boundary","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Limited flexibility on RVE boundary","text":"","category":"section"},{"location":"documentation/challenge_problem/","page":"Chemo-Mechanical Problem - Challenges and Problems","title":"Chemo-Mechanical Problem - Challenges and Problems","text":"Due to unsolved technical issues Dirichlet boundary conditions are used for RVE problem. A Periodic boundary condition is more desirable.","category":"page"},{"location":"reference/types/","page":"Types","title":"Types","text":"CurrentModule = YiyuanStudentProject","category":"page"},{"location":"reference/types/#Types","page":"Types","title":"Types","text":"","category":"section"},{"location":"reference/types/","page":"Types","title":"Types","text":"Material\nRVE\nLoadCase\nPhaseSetup\nRVESetup\nGaussPointData\nAssemblySetup\nSolveSetup\nMacroBCParams","category":"page"},{"location":"reference/types/#YiyuanStudentProject.Material","page":"Types","title":"YiyuanStudentProject.Material","text":"Material{dim,T}\n\nA Material characterize the constitutive behavior with:\n\nE:          fourth order stiffness tensor E,\nαᶜʰ:        second order ion intercalation tensor,\nk:          concentration-chemical potential coefficient,\ncʳᵉᶠ:       reference concentration,\nM:          second order mobility tensor,\nμʳᵉᶠ        reference chemical potantial.\n\nA Material with isotropic properties can be created by calling the funtion Material{dim}(; G::T, K::T, η::T, cʳᵉᶠ::T, μʳᵉᶠ::T, θʳᵉᶠ::T, cᵐ::T, α::T, R::T=8.31446261815324) where {dim, T<:Real}\n\n\n\n\n\n","category":"type"},{"location":"reference/types/#YiyuanStudentProject.RVE","page":"Types","title":"YiyuanStudentProject.RVE","text":"RVE{dim}\n\nA RVE is defined by a geometry and material characteristic of constituents that contains\n\ngrid:       a Grid for the prescribed RVE,\nP:          Material type for partical constraints,\nM:          Material type for matrix.\n\nAn object can be created by calling the funtion RVE(; grid::Grid{dim}, materials::NamedTuple{(:P,:M),Tuple{Material{dim}, Material{dim}}}) where {dim}\n\n\n\n\n\n","category":"type"},{"location":"reference/types/#YiyuanStudentProject.LoadCase","page":"Types","title":"YiyuanStudentProject.LoadCase","text":"LoadCase{dim}\n\nA LoadCase defines the macro scale quantities imposed on RVE as loading\n\nε̄:          average external strain tensor,\nμ̄:          average chemical potantial on the boundary,\nζ̄          gradient of the averaging chemical potantial on the boundary.\n\nTo create a LoadCase by defining only the non-zero tensor components the constructor LoadCase(dim::Int; kwargs...) can be used. In case of a 2D problem, arguments like ε̄₁₁, ε̄₁₂, ε̄₂₂, μ̄, ζ̄₁, ζ̄₂ are prescribed. For 3D cases, the corresponding arguments are ε̄₁₁, ε̄₁₂, ε̄₁₃ ε̄₂₃, ε̄₂₂,ε̄₃₃,μ̄ ,ζ̄₁,ζ̄₂,ζ̄₃`.\n\n\n\n\n\n","category":"type"},{"location":"reference/types/#YiyuanStudentProject.PhaseSetup","page":"Types","title":"YiyuanStudentProject.PhaseSetup","text":"PhaseSetup{dim}\n\nA PhaseSetup contains the relevant imformation for the element assembly:\n\ndh:             DofHandler based on the given grid,\ncells:          cell set defining the phase domain,\ncv:             CellValues in NamedTuple for each unknown field,\nnbf:            number of base function in NamedTuple for the unknown fields,\nmaterial:       Material of the phase,\nKₑ:             element stiffness matrix,\nMₑ:             element mass matrix,\nfₑ:             element right hand side vector,\nsubarrays:      subarrays blocks associated with the unknown fields for element matrix assembly.\n\n\n\n\n\n","category":"type"},{"location":"reference/types/#YiyuanStudentProject.RVESetup","page":"Types","title":"YiyuanStudentProject.RVESetup","text":"RVESetup{dim}\n\nA RVESetup contains the relevant imformation for the solving the transient problem:\n\ngrid:           a Grid defining the RVE geometry,\ndh:             DofHandler based on the given grid,\nphasesetups:    PhaseSetup in NamedTuple for each unknown field,\nK:              stiffness matrix,\nM:              mass matrix,\nf:              right hand side vector,\nJ:              system matrix for time stepping,\ng:              system vector for time stepping,\naⁿ:             unknowns at current time,\naⁿ⁺¹:           unknowns after performing a time,\nVʳᵛᵉ:           Volume of the RVE.\n\n\n\n\n\n","category":"type"},{"location":"reference/types/#YiyuanStudentProject.GaussPointData","page":"Types","title":"YiyuanStudentProject.GaussPointData","text":"GaussPointData{dim}\n\nA mutable GaussPointData that stores relevent data from the RVE problem for the one corresponding gauss point in macro scale problem:\n\naᵣᵥₑⁿ:           the result vector from every rve problem, \nc̄ⁿ:              the average concentration at current time step,\nc̄₂ⁿ:              the average moment of concentration at current time step.\n\n\n\n\n\n","category":"type"},{"location":"reference/types/#YiyuanStudentProject.AssemblySetup","page":"Types","title":"YiyuanStudentProject.AssemblySetup","text":"AssemblySetup{dim}\n\nAn AssemblySetup contains the relevant imformation for the element assembly in macro scale problem:\n\ndh:             DofHandler based on the given grid,\ncv:             CellValues in NamedTuple for each unknown field,\nnbf:            number of base function in NamedTuple for the unknown fields,\nKₑ:             element stiffness matrix,\naₑ:             element unknowns vector,\nsubarrays:      subarrays blocks associated with the unknown fields for element matrix assembly,\ngpdata:         GaussPointData at corresponding cell and gauss point,\nrvesetup:       RVESetup for evaluating fine scale rve problem at each gauss point.\n\n\n\n\n\n","category":"type"},{"location":"reference/types/#YiyuanStudentProject.SolveSetup","page":"Types","title":"YiyuanStudentProject.SolveSetup","text":"SolveSetup{dim}\n\nA SolveSetup contains the relevant imformation for the solving the transient macro scale problem:\n\ngrid:           a Grid defining the RVE geometry,\ndh:             DofHandler based on the given grid,\nch:             ConstraintHandler for updating the boundary condition at each time step,\nassemblysetup:  AssemblySetup for element assembly,\nK:              stiffness matrix,\nf:              right hand side vector,\naⁿ:             unknowns at current time.\n\n\n\n\n\n","category":"type"},{"location":"reference/types/#YiyuanStudentProject.MacroBCParams","page":"Types","title":"YiyuanStudentProject.MacroBCParams","text":"MacroBCParams\n\nA MacroBCParams contains the possible boundary condition for the macro scale problem:\n\nu_1:           the total boundary condition for unknown field u on facet 1,\nu_2:           the total boundary condition for unknown field u on facet 2,\nμ_1:           the total boundary condition for unknown field μ on facet 1, \nμ_2:           the total boundary condition for unknown field μ on facet 2,\nfacetset_1:    possible facet 1 for applying boundary condition,  \nfacetset_2:    possible facet 1 for applying boundary condition.        \n\n\n\n\n\n","category":"type"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = YiyuanStudentProject","category":"page"},{"location":"#Chemo-Mechanical-Problem","page":"Home","title":"Chemo-Mechanical Problem","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Documentation for YiyuanStudentProject.jl ","category":"page"},{"location":"#Introduction","page":"Home","title":"Introduction","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The aim of this project is to develop and implement a linear transient chemo-mechanical multi-scale model within the FE²-framework. Representitive Volumen Element (RVE) with fully resolved material microstructure is established on the sub scale, whereby a homogeneous macro scale is prescribed with the corresponding sub scale information.","category":"page"},{"location":"","page":"Home","title":"Home","text":"As indicated by the name, a chemo-mechanical problem refers to the situation where transport of chemical species and mechanical change (e.i. deformation) are coupled. Such problems are common in various fields, including battery science. Thus, a lithium-ion structural battery problem is discussed in this project, where the deformation and ion concentration have an influence on the chemical potential.","category":"page"},{"location":"","page":"Home","title":"Home","text":"This document provides an investigation of the mathematical model and comprehensive explanation of the code implementation with an example case study. ","category":"page"},{"location":"#Declaration-of-AI-use","page":"Home","title":"Declaration of AI use","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The following AI tools are used helping analysing code error messages and improving structure of the documentation as well as proofreading the documentation:","category":"page"},{"location":"","page":"Home","title":"Home","text":"ChatGPT 4o\nMicrosoft Copilot","category":"page"}]
}
